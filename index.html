<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CIIC 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Interact.js (drag + snap engine) -->
<script src="https://unpkg.com/interactjs/dist/interact.min.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: white;
  text-align: center;
  margin: 0;
  padding: 0;
}

h1 {
  margin-top: 20px;
}

#gameArea {
  width: 700px;
  height: 700px;
  margin: 30px auto;
  position: relative;
  background: #020617;
  border-radius: 20px;
  box-shadow: 0 0 30px rgba(255,255,255,0.1);
}

/* Snap target grid with guide images */
.target {
  width: 140px;
  height: 140px;
  position: absolute;
  border: 2px dashed rgba(255,255,255,0.15);
  border-radius: 12px;
  opacity: 0.4;
}

#t1 {
  left: 140px;
  top: 150px;
  background-image: url('images/1.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

#t0 {
  left: 280px;
  top: 150px;
  /* Empty target box - no background image */
}

#t2 {
  left: 420px;
  top: 150px;
  background-image: url('images/2.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

#t3 {
  left: 280px;
  top: 290px;
  background-image: url('images/3.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

#t4 {
  left: 280px;
  top: 430px;
  background-image: url('images/4.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}


/* Draggable pieces */
.piece {
  width: 140px;
  height: 140px;
  position: absolute;
  border-radius: 12px;
  cursor: grab;
  touch-action: none;
  box-shadow: 0 10px 20px rgba(0,0,0,0.5);
  user-select: none;
}

/* Logo pieces using images */
#p1 { 
  background-image: url('images/1.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  left: 30px; 
  top: 60px; 
}
#p2 { 
  background-image: url('images/2.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  left: 30px; 
  top: 220px; 
}
#p3 { 
  background-image: url('images/3.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  left: 530px; 
  top: 60px; 
}
#p4 { 
  background-image: url('images/4.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  left: 530px; 
  top: 220px; 
}

#launchScreen {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle, #1e293b, #020617);
  display: none;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  font-size: 42px;
  animation: fadeIn 1s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.9);} 
  to { opacity: 1; transform: scale(1);} 
}

.glow {
  animation: glowPulse 1.2s infinite alternate;
}

@keyframes glowPulse {
  from { box-shadow: 0 0 10px white; }
  to { box-shadow: 0 0 30px cyan; }
}

#hint {
  opacity: 0.7;
  font-size: 14px;
}

</style>
</head>

<body>

<h1>CIIC 2026</h1>
<div id="hint">Drag all 4 pieces into respective targets</div>

<div id="gameArea">
  <!-- Snap Targets -->
  <div class="target" id="t1"></div>
  <div class="target" id="t2"></div>
  <div class="target" id="t0"></div>
  <div class="target" id="t3"></div>
  <div class="target" id="t4"></div>

  <!-- Draggable Pieces -->
  <div class="piece" id="p1" data-target="t1"></div>
  <div class="piece" id="p2" data-target="t2"></div>
  <div class="piece" id="p3" data-target="t3"></div>
  <div class="piece" id="p4" data-target="t4"></div>
</div>

<!-- Launch Reveal Screen -->
<div id="launchScreen">
  <img src="images/full_logo.png" alt="Complete Logo" style="max-width: 400px; max-height: 400px; margin-bottom: 20px;">
  <div style="font-size:32px;margin-top:10px;">ðŸš€ EVENT LAUNCHED</div>
  <div style="font-size:18px;margin-top:10px;opacity:0.8;">CIIC 2026</div>
  <div style="font-size:18px;margin-top:10px;opacity:0.8;">Converging Ideas, Accelerating Impacts</div>
</div>

<script>
let placedCount = 0;

function centerOf(el) {
  const r = el.getBoundingClientRect();
  return {
    x: r.left + r.width/2,
    y: r.top + r.height/2
  };
}

function distance(a,b){
  return Math.hypot(a.x-b.x, a.y-b.y);
}

function lockPiece(piece) {
  piece.classList.add('glow');
  piece.style.pointerEvents = 'none';
  piece.setAttribute('data-locked','1');
  placedCount++;
  checkComplete();
}

function checkSnap(piece) {
  if (piece.getAttribute('data-locked') === '1') return;

  const targetId = piece.dataset.target;
  const target = document.getElementById(targetId);

  const d = distance(centerOf(piece), centerOf(target));

  if (d < 40) {
    const tr = target.getBoundingClientRect();
    const pr = piece.getBoundingClientRect();

    const dx = tr.left - pr.left;
    const dy = tr.top - pr.top;

    const x = (parseFloat(piece.getAttribute('data-x'))||0) + dx;
    const y = (parseFloat(piece.getAttribute('data-y'))||0) + dy;

    piece.style.transform = `translate(${x}px, ${y}px)`;
    piece.setAttribute('data-x', x);
    piece.setAttribute('data-y', y);

    lockPiece(piece);
  }
}

function checkComplete() {
  if (placedCount === 4) {
    setTimeout(()=>{
      document.getElementById('launchScreen').style.display='flex';
    }, 700);
  }
}

interact('.piece').draggable({
  listeners: {
    move (event) {
      const target = event.target;
      if (target.getAttribute('data-locked') === '1') return;

      const x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
      const y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

      target.style.transform = `translate(${x}px, ${y}px)`;
      target.setAttribute('data-x', x);
      target.setAttribute('data-y', y);
    },
    end (event) {
      checkSnap(event.target);
    }
  }
});
</script>

</body>
</html>
